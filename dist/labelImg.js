require=function(r,e,n){function t(n,o){function i(r){return t(i.resolve(r))}function f(e){return r[n][1][e]||e}if(!e[n]){if(!r[n]){var c="function"==typeof require&&require;if(!o&&c)return c(n,!0);if(u)return u(n,!0);var l=new Error("Cannot find module '"+n+"'");throw l.code="MODULE_NOT_FOUND",l}i.resolve=f;var a=e[n]=new t.Module;r[n][0].call(a.exports,i,a,a.exports)}return e[n].exports}function o(){this.bundle=t,this.exports={}}var u="function"==typeof require&&require;t.Module=o,t.modules=r,t.cache=e,t.parent=u;for(var i=0;i<n.length;i++)t(n[i]);return t}({1:[function(require,module,exports) {
"use strict";!function(t){var e;function n(t){this.el=t.el,this.shape=t.shape||"polygon",this.labelInfo=t.labelInfo||[{names:"",labels:[]}],this.isGroup=t.isGroup||!1,this.groupList=t.groupList||["任意对象","对象"],this.x=0,this.y=0,this.kx=1,this.ky=1,this.imgWidth=0,this.imgHeight=0,this.color_active="#ff0000",this.polygonConfig={points:[],stack:[]},this.labelsConfig={stack:[]},this.outputData=[],this.TOOLS=[{NAME:"magnify",ICON:"⧾",TITLE:"放大"},{NAME:"shrink",ICON:"⧿",TITLE:"缩小"},{NAME:"repeal",ICON:"⏴",TITLE:"撤销"},{NAME:"clean",ICON:"⟳",TITLE:"清空"}],this.COLORS=["#ff0000","#00db00","#f9f900","#0072e3"],e=this,o.call(this),c()}function o(){this.el.innerHTML=o.ui(),document.querySelector(".lbi-tool-box").innerHTML=o.toolBox(this.TOOLS),i(),document.querySelector(".lbi-color-box").innerHTML=o.colorBox(this.COLORS),o.handleColor(),o.handleShape(),document.getElementById("lbi-select-names").innerHTML=o.selectBox(this.labelInfo),o.handleSelect(),o.axisSetting(document.querySelector(".lbi-svg-box")),l()}function l(){l.groupBtn()}function i(){document.querySelector(".lbi-tool-box").addEventListener("click",function(t){var e=t.target,n=document.querySelector(".lbi-svg"),o=document.querySelector(".lbi-img");"span"===e.tagName.toLowerCase()&&i[e.dataset.action](o,n)})}function s(t,n){n.style.width=t.clientWidth+"px",n.style.height=t.clientHeight+"px",e.kx=e.imgWidth/t.clientWidth,e.ky=e.imgHeight/t.clientHeight}function c(){var t,n=document.querySelector(".lbi-svg");switch(e.shape){case"point":(t=n).onmousedown=t.onmousemove=t.onmouseup=null,t.onclick=function(n){e.x=n.offsetX*e.kx,e.y=n.offsetY*e.ky;var o={class:"svg-child-not-g",cx:e.x,cy:e.y,r:2,stroke:e.color_active,fill:e.color_active,"data-index":t.children.length-t.getElementsByTagName("g").length+1,"data-position":`[${e.x}, ${e.y}]`},l=a(o);t.appendChild(l),document.querySelector(".lbi-mask").style.display="block"};break;case"rect":!function(t){var n,o,l,i;t.onclick=null,t.onmousedown=function(s){e.x=s.offsetX*e.kx,e.y=s.offsetY*e.ky;var c={class:"svg-child-not-g",x:e.x,y:e.y,width:0,height:0,stroke:e.color_active,style:"fill:none;stroke-width:1"},a=function(t){return u("rect",t)}(c);t.appendChild(a),t.onmousemove=function(t){n=t.offsetX*e.kx>e.x?e.x:t.offsetX*e.kx,o=t.offsetY*e.ky>e.y?e.y:t.offsetY*e.ky,l=Math.abs(t.offsetX*e.kx-e.x),i=Math.abs(t.offsetY*e.ky-e.y),a.setAttribute("x",n),a.setAttribute("y",o),a.setAttribute("width",l),a.setAttribute("height",i)},t.onmouseup=t.onmouseleave=function(s){if(n=parseInt(n,10),o=parseInt(o,10),l=parseInt(l,10),i=parseInt(i,10),a.setAttribute("data-position","[["+n+","+o+"], ["+(n+l)+","+o+"], ["+(n+l)+","+(o+i)+"], ["+n+","+(o+i)+"]]"),a.setAttribute("data-index",t.children.length-t.getElementsByTagName("g").length),e.x===s.offsetX*e.kx&&e.y===s.offsetY*e.ky)return t.removeChild(a),void(t.onmousemove=t.onmouseup=t.onmouseleave=null);document.querySelector(".lbi-mask").style.display="block",t.onmousemove=t.onmouseup=t.onmouseleave=null}}}(n);break;case"polygon":!function(t){t.onmousedown=t.onmousemove=t.onmouseup=null,t.onclick=function(n){if("circle"===n.target.tagName){var o=e.polygonConfig.points.join(" "),l={class:"svg-child-not-g",points:o,fill:e.color_active,style:"stroke:purple;stroke-width:1;opacity:.3"},i=function(t){return u("polygon",t)}(l);i.setAttribute("data-position",JSON.stringify(e.polygonConfig.points)),t.appendChild(i),e.polygonConfig.stack.forEach(function(e){t.removeChild(e)}),i.setAttribute("data-index",t.children.length-t.getElementsByTagName("g").length),document.querySelector(".lbi-mask").style.display="block",e.polygonConfig.stack=[],e.polygonConfig.points=[]}else{e.x=n.offsetX*e.kx,e.y=n.offsetY*e.ky,e.polygonConfig.points.push([e.x,e.y]);var s=e.polygonConfig.points.length;if(1===s){var l={cx:e.x,cy:e.y,r:4,stroke:"black",fill:e.color_active},c=a(l);return this.appendChild(c),void e.polygonConfig.stack.push(c)}if(s>1){var l={x1:e.polygonConfig.points[s-2][0],y1:e.polygonConfig.points[s-2][1],x2:e.polygonConfig.points[s-1][0],y2:e.polygonConfig.points[s-1][1],stroke:e.color_active,style:"stroke-width:1"},r=function(t){return u("line",t)}(l);this.appendChild(r),e.polygonConfig.stack.push(r)}}}}(n);break;case"polyline":!function(t){t.onclick=t.onmouseup=null;var n=[];t.onmousedown=function(o){if(document.oncontextmenu=function(){return!1},1!==o.buttons){if(2===o.buttons){if(n.length<2){var l=document.querySelector(".polyline-active");return l.parentNode.removeChild(l),void(n=[])}document.querySelector(".polyline-active").setAttribute("points",n.join(" ")),n=[],document.querySelector(".polyline-active").classList.remove("polyline-active"),document.querySelector(".lbi-mask").style.display="block"}}else if(e.x=o.offsetX*e.kx,e.y=o.offsetY*e.ky,n.push([e.x,e.y]),n.length>1){var i={class:"svg-child-not-g polyline-active",points:n.join(" "),fill:"none",stroke:e.color_active,"data-index":t.children.length-t.getElementsByTagName("g").length+1,"data-position":n},l=document.querySelector(".polyline-active");l?(l.setAttribute("points",n.join(" ")),l.setAttribute("data-position",JSON.stringify(n))):l=r(i),t.appendChild(l)}},t.onmousemove=function(o){e.x=o.offsetX*e.kx,e.y=o.offsetY*e.ky;var l=[e.x,e.y],i=n.concat(l);if(n.length>0){var s={class:"svg-child-not-g polyline-active",points:i.join(" "),fill:"none",stroke:e.color_active,"data-index":t.children.length-t.getElementsByTagName("g").length+1,"data-position":n},c=document.querySelector(".polyline-active");c?c.setAttribute("points",i.join(" ")):c=r(s),t.appendChild(c)}}}(n)}}function a(t){var e=u("circle",t);return e.addEventListener("mouseover",function(t){t.target.style.strokeWidth=10}),e.addEventListener("mouseout",function(t){t.target.style.strokeWidth=1}),e}function r(t){return u("polyline",t)}function u(t,e){var n=document.createElementNS("http://www.w3.org/2000/svg",t);for(var o in e)e.hasOwnProperty(o)&&n.setAttribute(o,e[o]);return n}function d(t,e){return Array.prototype.filter.call(t,function(t,n){return t!==e})}n.prototype={addImg:function(t){var n=document.querySelector(".lbi-img");n||((n=document.createElement("img")).className="lbi-img"),n.src=t,n.onload=function(){var t=document.querySelector(".lbi-svg");e.imgWidth=n.naturalWidth,e.imgHeight=n.naturalHeight,t.setAttribute("viewBox","0, 0, "+e.imgWidth+", "+e.imgHeight),n.style.width=n.naturalWidth>n.parentNode.clientWidth?n.parentNode.clientWidth+"px":n.naturalWidth+"px",s(n,t),i.clean()}},output:function(){var t=document.getElementById("lbi-svg"),e=[];return Array.prototype.forEach.call(t.children,function(t,n){var o={};o.index=n+1,o.position=JSON.parse(t.dataset.position),e.push(o)}),e}},o.ui=function(){return'\n\t\t\t<div class="lbi-main">\n\t\t\t\t<div class="lbi-tool-box"></div>\n\t\t\t\t<div class="lbi-paint-box">\n\t\t\t\t\t<div class="lbi-svg-box">\n\t\t\t\t\t\t<img src="" alt="" class="lbi-img" />\n\t\t\t\t\t\t<svg class="lbi-svg"></svg>\n\t\t\t\t\t</div>\n\t\t\t\t\t<svg class="lbi-axis">\n\t\t\t\t\t\t<line x1="0" y1="0" x2="870" y2="0" style="stroke:#1c79c6;stroke-width:2" />\n\t\t\t\t\t\t<line x1="0" y1="0" x2="0" y2="550" style="stroke:#1c79c6;stroke-width:2" />\n\t\t\t\t\t</svg>\n\t\t\t\t</div>\n\t\t\t\t<div class="lbi-mask">\n\t\t\t\t\t<div class="lbi-select-box">\n\t\t\t\t\t\t<div class="lbi-side-tt">标注对象</div>\n\t\t\t\t\t\t<label class="lbi-select-label">\n\t\t\t\t\t\t\t名称：\n\t\t\t\t\t\t\t<select name="" id="lbi-select-names" class="lbi-select"></select>\n\t\t\t\t\t\t</label>\n\t\t\t\t\t\t<label class="lbi-select-label">\n\t\t\t\t\t\t\t标签：\n\t\t\t\t\t\t\t<select name="" id="lbi-select-labels" class="lbi-select"></select>\n\t\t\t\t\t\t</label>\n\t\t\t\t\t\t<button class="lbi-select-btn lbi-select-btn-submit" type="button">确认</button>\n\t\t\t\t\t\t<button class="lbi-select-btn lbi-select-btn-close" type="button">取消</button>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div class="lbi-side">\n\t\t\t\t<div class="lbi-side-item">\n\t\t\t\t\t<p class="lbi-side-tt">颜色选择</p>\n\t\t\t\t\t<div class="lbi-color-box"></div>\n\t\t\t\t\t<p class="lbi-side-tt">标注方式</p>\n\t\t\t\t\t<div class="lbi-shape-box">\n\t\t\t\t\t\t<button class="lbi-shape-btn" type="button" data-shape="point">打点</button>\n\t\t\t\t\t\t<button class="lbi-shape-btn" type="button" data-shape="rect">画框</button>\n\t\t\t\t\t\t<button class="lbi-shape-btn" type="button" data-shape="polygon">描边</button>\n\t\t\t\t\t\t<button class="lbi-shape-btn" type="button" data-shape="polyline">画线</button>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div class="lbi-side-item">\n\t\t\t\t\t<div class="lbi-side-tt">\n\t\t\t\t\t\t标注信息\n\t\t\t\t\t\t<span class="lbi-group-btn">生成组</span>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="lbi-info-box"></div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t'},o.toolBox=function(t){var e="";return t.forEach(function(t){e+=`\n\t\t\t\t<span class="lbi-tool" title="${t.TITLE}" data-action="${t.NAME}">\n\t\t\t\t\t${t.ICON}\n\t\t\t\t</span>\n\t\t\t`}),e},o.selectBox=function(t){var e={},n='<option value="">-- 请选择 --</option>';return t.forEach(function(t){n+=`<option value="${t.name}">${t.name}</option>`,e[t.name]=t.labels}),document.getElementById("lbi-select-names").onchange=function(){var t='<option value="">-- 请选择 --</option>';e[this.value].forEach(function(e){t+=`<option value="${e}">${e}</option>`}),document.getElementById("lbi-select-labels").innerHTML=t},n},o.colorBox=function(t){var e="";return t.forEach(function(t){e+=`<span class="lbi-color-item" data-color="${t}" style="border-color: ${t};"></span>`}),e},o.infoBox=function(t,e){var n=document.createElement("div");n.className="lbi-info-item";var o=`\n\t\t\t<p class="lbi-info-name"><b>${t}：</b>${e}</p>\n\t\t`;return n.innerHTML=o,n},o.handleSelect=function(){document.querySelector(".lbi-select-btn-submit").onclick=function(){var t=document.getElementById("lbi-select-names").value,e=document.getElementById("lbi-select-labels").value,n=o.infoBox(t,e);document.querySelector(".lbi-info-box").appendChild(n);var l=document.querySelector(".lbi-svg"),i=l.children.length;l.children[i-1].setAttribute("data-name",t),l.children[i-1].setAttribute("data-label",e),function(){var t=document.querySelectorAll(".lbi-info-item"),e=document.querySelectorAll(".svg-child-not-g");for(let n=0;n<t.length;n++)t[n].onmouseenter=function(t){e[n].style.strokeWidth=10},t[n].onmouseleave=function(t){e[n].style.strokeWidth=1}}(),document.getElementById("lbi-select-names").value="",document.getElementById("lbi-select-labels").value="",document.querySelector(".lbi-mask").style.display="none"},document.querySelector(".lbi-select-btn-close").onclick=function(){var t=document.querySelector(".lbi-svg");t.removeChild(t.lastChild),document.getElementById("lbi-select-names").value="",document.getElementById("lbi-select-labels").value="",document.querySelector(".lbi-mask").style.display="none"}},o.handleColor=function(){document.querySelector('span[data-color="'+e.color_active+'"]').style.backgroundColor=e.color_active;var t=document.querySelectorAll(".lbi-color-item");for(let n=0;n<t.length;n++)t[n].onclick=function(o){e.color_active=t[n].style.backgroundColor=t[n].dataset.color,d(t,t[n]).forEach(function(t){t.style.backgroundColor="#fff"})}},o.handleShape=function(){var t=document.querySelector('button[data-shape="'+e.shape+'"]');t.style.backgroundColor="#e6e6e6",t.style.border="1px solid #adadad";var n=document.querySelectorAll(".lbi-shape-btn");for(let t=0;t<n.length;t++)n[t].onclick=function(o){e.shape=n[t].dataset.shape,n[t].style.backgroundColor="#e6e6e6",n[t].style.border="1px solid #adadad",d(n,n[t]).forEach(function(t){t.style.backgroundColor="#fff",t.style.border="1px solid #ccc"}),c()}},o.svgSetting=function(t){var e=document.getElementById("lbi-svg");e.style.width=t.clientWidth+"px",e.style.height=t.clientHeight+"px",e.addEventListener("mouseover",function(t){}),e.addEventListener("mouseout",function(){})},o.axisSetting=function(t){var e=document.querySelector(".lbi-axis"),n=e.firstElementChild,o=e.lastElementChild;t.onmousemove=function(e){n.setAttribute("y1",e.offsetY-t.scrollTop),n.setAttribute("y2",e.offsetY-t.scrollTop),o.setAttribute("x1",e.offsetX-t.scrollLeft),o.setAttribute("x2",e.offsetX-t.scrollLeft)}},o.infoTitle=function(t){var e='\n\t\t\t<div class="lbi-info-title">\n\t\t\t\t标注对象：\n\t\t\t\t<select class="lbi-info-select">\n\t\t';for(let n=0;n<t.length;n++)e+=`<option value="${t[n]}">${t[n]}</option>`;return e+="\n\t\t\t\t</select>\n\t\t\t</div>\n\t\t"},l.groupBtn=function(){document.querySelector(".lbi-group-btn").onclick=function(){var t=document.querySelector(".lbi-svg"),n=Array.prototype.filter.call(t.children,function(t){return"g"!==t.tagName.toLowerCase()}),i=u("g",{"data-groupId":t.children.length-n.length+1});for(let t=0;t<n.length;t++)"g"!==n[t].tagName.toLowerCase()&&i.appendChild(n[t]);t.appendChild(i);var s=document.querySelector(".lbi-info-box"),c=Array.prototype.filter.call(s.children,function(t){return"lbi-info-list"!==t.className}),a=document.createElement("div");a.className="lbi-info-list",a.innerHTML=o.infoTitle(e.groupList);for(let t=0;t<c.length;t++)a.appendChild(c[t]);s.appendChild(a),l.infoSelect()}},l.infoSelect=function(){var t=document.querySelectorAll(".lbi-info-select");for(let n=0;n<t.length;n++){var e=document.querySelector(".lbi-svg").getElementsByTagName("g")[n];e.setAttribute("data-name",t[n].value),t[n].onchange=function(){console.log(this.value),e.setAttribute("data-name",this.value)}}},i.magnify=function(t,e){t.style.width=t.clientWidth+100+"px",s(t,e)},i.shrink=function(t,e){t.style.width=t.clientWidth-100+"px",s(t,e)},i.repeal=function(){var t=document.querySelector(".lbi-svg"),n=document.querySelector(".lbi-info-box");if(e.polygonConfig.stack.length>0)return t.removeChild(e.polygonConfig.stack[e.polygonConfig.stack.length-1]),e.polygonConfig.points.pop(),void e.polygonConfig.stack.pop();t.lastChild&&(t.removeChild(t.lastChild),n.removeChild(n.lastChild))},i.clean=function(){var t=document.querySelector(".lbi-svg");document.querySelector(".lbi-info-box").innerHTML="",t.innerHTML="",e.polygonConfig.points=[],e.polygonConfig.stack=[],document.querySelector(".lbi-mask").style.display="none"},t.Labelimg=n}(window);
},{}]},{},[1])